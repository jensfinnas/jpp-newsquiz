"use strict";var app=angular.module("newsquizApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/:name",{templateUrl:"views/quiz.html",controller:"QuizCtrl"}).otherwise({redirectTo:"/"})}]);angular.module("newsquizApp").controller("MainCtrl",["$scope",function(a){a.quizes=[{name:"geography",label:"NKB:s awesome geo quiz"},{name:"insects",label:"Do these creatues have 4 legs?"}]}]),angular.module("newsquizApp").controller("QuizCtrl",["$scope","$routeParams","$timeout","$filter","Questions",function(a,b,c,d,e){var f={secondsPerQuestion:3,numberOfLifes:3},g=[];a.quizName=b.name,a.currentQuestionIndex=void 0,a.showResponse=!1,a.response="",e.get(b.name).then(function(b){h(),g=b.data,a.currentQuestionIndex=0}),a.$watch("currentQuestionIndex",function(b){g.length>0&&(a.currentQuestion=g[a.currentQuestionIndex],a.currentQuestionIndex==g.length&&k())});var h=function(){a.currentTime=10*f.secondsPerQuestion};a.onTimeout=function(){a.currentTime--,a.currentTime<0&&(h(),g[a.currentQuestionIndex].status="unanswered",a.response="Too slow!",j(),a.currentQuestionIndex++,a.lifesLeft--),i=c(a.onTimeout,100)};var i=c(a.onTimeout,100);a.lifesLeft=f.numberOfLifes,a.getPoints=function(){return d("filter")(g,{status:"correct"}).length},a.$watch("lifesLeft",function(a){0==a&&k()});var j=function(){a.showResponse=!0,c(function(){a.showResponse=!1},500)};a.answer=function(b){b==a.currentQuestion.correctAnswer?(g[a.currentQuestionIndex].status="correct",a.response="Correctamumdo!",j()):(g[a.currentQuestionIndex].status="false",a.lifesLeft--,a.response="Not even close!",j()),a.currentQuestionIndex=a.currentQuestionIndex+1,h()};var k=function(){a.showResults=!0,c.cancel(i)}}]),app.factory("Questions",["$http",function(a){var b={};return b.get=function(b){var c="quizes/"+b+"/questions.json";return a.get(c).success(function(a){return a.data}).error(function(){console.log("error")})},b}]);